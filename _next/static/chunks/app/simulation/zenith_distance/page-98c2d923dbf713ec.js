(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{1412:(e,a,n)=>{Promise.resolve().then(n.bind(n,7987))},1441:(e,a,n)=>{"use strict";n.d(a,{$P:()=>l,DC:()=>i,ED:()=>p,Hb:()=>d,L3:()=>m,ar:()=>s,lw:()=>h,zA:()=>o});let t=Math.PI/180,r=15*t;function s(e){let a=Math.cos(e),n=Math.sin(e);return[[1,0,0],[0,a,-n],[0,n,a]]}function i(e,a){let n=[0,0,0];for(let t=0;t<3;t++)for(let r=0;r<3;r++)n[t]+=e[t][r]*a[r];return n}function o(e){let a=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return 0===a?e:[e[0]/a,e[1]/a,e[2]/a]}function l(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return[n*Math.cos(a)*Math.cos(e),n*Math.cos(a)*Math.sin(e),n*Math.sin(a)]}function c(e,a,n){let r=o(a),s=n*t,i=Math.cos(s),l=Math.sin(s),c=[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]],d=r[0]*e[0]+r[1]*e[1]+r[2]*e[2];return[e[0]*i+c[0]*l+r[0]*d*(1-i),e[1]*i+c[1]*l+r[1]*d*(1-i),e[2]*i+c[2]*l+r[2]*d*(1-i)]}function d(e){let a=23.4*t,n=e.starDecDeg*t,d=e.starRaHours*r,p=l(d,n,e.starDist),h=i(function(e){let a=Math.cos(e),n=Math.sin(e);return[[a,-n,0],[n,a,0],[0,0,1]]}(d),[0,1,0]),m=[],u=1;for(;u<=365;)m.push(u),u+=1;let g=[],_=i(s(a),[0,0,1]);for(let e of m){let t=((e-81)/365*24+12)%24*r,l=+Math.cos(t),d=+Math.sin(t),m=i(s(a),[l,d,0]),u=function(e,a){let n=o(e),t=o(a);return Math.asin(Math.abs(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]))}([m[0]-p[0],m[1]-p[1],m[2]-p[2]],[0,0,1]),b=u-n,x=function(e,a){let n=o(a),t=e[0]*n[0]+e[1]*n[1]+e[2]*n[2];return[e[0]-t*n[0],e[1]-t*n[1],e[2]-t*n[2]]}(c(m,_,90).map(e=>3e4*e),h),y=o(p).map(e=>-(3e8*e)),v=Math.PI/2-function(e,a){let n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),t=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);if(0===n||0===t)throw Error("Cannot compute angle with zero-length vector");return Math.acos(Math.max(-1,Math.min(1,(e[0]*a[0]+e[1]*a[1]+e[2]*a[2])/(n*t))))}([y[0]-x[0],y[1]-x[1],y[2]-x[2]],[0,0,-1]),f=v-n;g.push({day:e,decAngleParallax:u,zenithDistParallax:b,decAngleAberration:v,zenithDistAberration:f,zenithDist:b+f,earthPosition:m,starPosition:p})}return g}function p(){let e=23.4*t,a=[];for(let e=0;e<200;e++)a.push(e/200*2*Math.PI);let n=[];for(let t of a){let a=+Math.cos(t),r=+Math.sin(t),o=i(s(e),[a,r,0]);n.push(o)}return n}function h(e){let a=15*t*(((e-81)/365*24+12)%24),n=+Math.cos(a),r=+Math.sin(a);return i(s(23.4*t),[n,r,0])}function m(e){let a=23.4*t,n=15*t*(((e-81)/365*24+12)%24),r=+Math.cos(n),o=+Math.sin(n);return c(i(s(a),[r,o,0]),i(s(a),[0,0,1]),90).map(e=>3e4*e)}},7987:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>m});var t=n(5155),r=n(2115),s=n(5028),i=n(1441),o=n(6408),l=n(760),c=n(6474),d=n(4284);function p(e){let{title:a,children:n,defaultOpen:s=!1,className:i=""}=e,[p,h]=(0,r.useState)(s);return(0,t.jsxs)(d.bL,{open:p,onOpenChange:h,className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden ".concat(i),children:[(0,t.jsx)(d.l9,{className:"w-full",children:(0,t.jsxs)(o.P.div,{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",whileHover:{x:2},children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a}),(0,t.jsx)(o.P.div,{animate:{rotate:180*!!p},transition:{duration:.2},children:(0,t.jsx)(c.A,{className:"w-5 h-5 text-gray-500"})})]})}),(0,t.jsx)(l.N,{children:p&&(0,t.jsx)(d.UC,{forceMount:!0,children:(0,t.jsx)(o.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"border-t border-gray-200 dark:border-gray-700",children:(0,t.jsx)("div",{className:"p-4",children:n})})})})]})}let h=(0,s.default)(()=>Promise.all([n.e(840),n.e(341)]).then(n.bind(n,1514)),{loadableGenerated:{webpack:()=>[1514]},ssr:!1});function m(){let[e,a]=(0,r.useState)(51.5),[n,s]=(0,r.useState)(18),[o,l]=(0,r.useState)(10),[c,d]=(0,r.useState)(80),[m,u]=(0,r.useState)(!0),[g,_]=(0,r.useState)(!0),[b,x]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>({starDecDeg:e,starRaHours:n,starDist:1e6*Math.max(o,0)}),[e,n,o]),v=(0,r.useMemo)(()=>(0,i.Hb)(y),[y]),f=(0,r.useMemo)(()=>(0,i.ED)(),[]),k=(0,r.useMemo)(()=>(0,i.lw)(c),[c]),w=(0,r.useMemo)(()=>(0,i.L3)(c),[c]),M=(0,r.useMemo)(()=>(0,i.zA)(w),[w]),N=(0,r.useMemo)(()=>k.map((e,a)=>e+ +M[a]),[k,M]),j=(0,r.useMemo)(()=>{let e=Math.PI/180*23.4,a=a=>{let n=15*Math.PI/180*a;return(0,i.DC)((0,i.ar)(e),[1.4*Math.cos(n),1.4*Math.sin(n),0])};return[{label:"March",pos:a(12)},{label:"June",pos:a(18)},{label:"Sep",pos:a(0)},{label:"Dec",pos:a(6)}]},[]),z=(0,r.useMemo)(()=>{let a=Math.PI/180*e,t=15*Math.PI/180*n;return(0,i.$P)(t,a,1).map(e=>2*e)},[e,n]),A=v.find(e=>.5>Math.abs(e.day-c))||v[Math.floor(c)],D=v.map(e=>e.day),E=v.map(e=>206264.806*e.zenithDistParallax),S=v.map(e=>206264.806*e.zenithDistAberration),C=v.map(e=>206264.806*e.zenithDist),P=A?206264.806*A.zenithDistParallax:0,T=A?206264.806*A.zenithDistAberration:0,R=A?206264.806*A.zenithDist:0,I=[80,172,264,355],q=(e=>{if(0===e.length)return[-1,1];let a=e[0],n=e[0];for(let t of e)t<a&&(a=t),t>n&&(n=t);let t=(n-a)*.05||1;return[a-t,n+t]})([...m?E:[],...g?S:[],...b?C:[]]),O=Math.max(1,(q[1]-q[0])*.03),U=I.map(e=>({type:"line",xref:"x",yref:"y",x0:e,x1:e,y0:0,y1:O,line:{color:"black",width:1.2}})),L=[];m&&(L.push({x:D,y:E,type:"scatter",mode:"lines",name:"Parallax",line:{color:"#3b82f6"}}),L.push({x:[c],y:[P],type:"scatter",mode:"markers",name:"Selected Day (Parallax)",marker:{size:8,color:"#3b82f6"},showlegend:!1})),g&&(L.push({x:D,y:S,type:"scatter",mode:"lines",name:"Aberration",line:{color:"#ef4444"}}),L.push({x:[c],y:[T],type:"scatter",mode:"markers",name:"Selected Day (Aberration)",marker:{size:8,color:"#ef4444"},showlegend:!1})),b&&(L.push({x:D,y:C,type:"scatter",mode:"lines",name:"Observation",line:{color:"black"}}),L.push({x:[c],y:[R],type:"scatter",mode:"markers",name:"Selected Day (Total)",marker:{size:8,color:"black"},showlegend:!1}));let H=f.map(e=>e[0]),V=f.map(e=>e[1]),G=f.map(e=>e[2]),F=[-2,2];return(0,t.jsx)("div",{className:"min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-8 pt-24",children:(0,t.jsxs)("div",{className:"max-w-6xl w-full mx-auto",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Change in Zenith Distance Due to Parallax and Aberration"}),(0,t.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg mb-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Star Declination (degrees)"}),(0,t.jsx)("input",{type:"number",min:"-89.9",max:"89.9",step:"0.1",value:e,onChange:e=>a(Number.isFinite(e.target.valueAsNumber)?e.target.valueAsNumber:0),className:"w-full rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Star Right Ascension (hours)"}),(0,t.jsx)("input",{type:"number",min:"0",max:"24",step:"0.1",value:n,onChange:e=>s(Number.isFinite(e.target.valueAsNumber)?e.target.valueAsNumber:0),className:"w-full rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Star Distance (M AU)"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.1",value:o,onChange:e=>l(Number.isFinite(e.target.valueAsNumber)?e.target.valueAsNumber:0),className:"w-full rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-2 text-sm"})]})]}),(0,t.jsxs)("div",{className:"mt-4 max-w-lg",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Selected Day: ",c]}),(0,t.jsx)("input",{type:"range",min:"1",max:"365",step:"1",value:c,onChange:e=>d(parseInt(e.target.value)),className:"w-full"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 mb-8",children:[(0,t.jsxs)("div",{className:"lg:flex-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Earth, Sun, Orbit, and Star"}),(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",style:{height:"420px"},children:(0,t.jsx)(h,{data:[{x:H,y:V,z:G,type:"scatter3d",mode:"lines",line:{color:"black",width:3},name:"Ecliptic Orbit"},{x:[0],y:[0],z:[0],type:"scatter3d",mode:"markers",marker:{size:10,color:"red"},name:"Sun"},{x:[k[0]],y:[k[1]],z:[k[2]],type:"scatter3d",mode:"markers",marker:{size:8,color:"blue"},name:"Earth"},{x:j.map(e=>e.pos[0]),y:j.map(e=>e.pos[1]),z:j.map(e=>e.pos[2]),type:"scatter3d",mode:"text",text:j.map(e=>e.label),textposition:"top center",name:"Seasons",showlegend:!1},{x:[k[0],N[0]],y:[k[1],N[1]],z:[k[2],N[2]],type:"scatter3d",mode:"lines",line:{color:"#0f766e",width:4},name:"Earth Velocity"},{x:[N[0]],y:[N[1]],z:[N[2]],u:[+M[0]],v:[+M[1]],w:[+M[2]],type:"cone",anchor:"tip",sizemode:"absolute",sizeref:.5,colorscale:[[0,"#0f766e"],[1,"#0f766e"]],showscale:!1,name:"Earth Velocity"},{x:[z[0]],y:[z[1]],z:[z[2]],type:"scatter3d",mode:"markers",marker:{size:5,color:"orange"},name:"Star"}],layout:{title:{text:""},scene:{xaxis:{title:{text:"x (March Equinox)"},range:F,autorange:!1,tickvals:[-1,0,1]},yaxis:{title:{text:"y"},range:F,autorange:!1,tickvals:[-1,0,1]},zaxis:{title:{text:"z (Celestial North)"},range:F,autorange:!1,tickvals:[-1,0,1]},aspectmode:"cube",camera:{eye:{x:1.5,y:1.5,z:1.5}}},height:420,margin:{l:0,r:0,t:50,b:0},uirevision:"scene-fixed"},config:{responsive:!0,displayModeBar:!0},style:{width:"100%",height:"100%"}})})]}),(0,t.jsxs)("div",{className:"lg:flex-1",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>u(e=>!e),className:"px-3 py-1 text-sm font-medium rounded-md border ".concat(m?"bg-blue-100 text-blue-800 border-blue-300 dark:bg-blue-900/40 dark:text-blue-200 dark:border-blue-700":"bg-white text-gray-600 border-gray-300 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700"),children:"Parallax"}),(0,t.jsx)("button",{type:"button",onClick:()=>_(e=>!e),className:"px-3 py-1 text-sm font-medium rounded-md border ".concat(g?"bg-red-100 text-red-800 border-red-300 dark:bg-red-900/40 dark:text-red-200 dark:border-red-700":"bg-white text-gray-600 border-gray-300 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700"),children:"Aberration"})]})}),(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",style:{height:"420px"},children:(0,t.jsx)(h,{data:L,layout:{xaxis:{title:{text:"Day",standoff:10},range:[0,370],autorange:!1,tickmode:"array",tickvals:I,ticktext:["March Equinox","June Solstice","September Equinox","December Solstice"],tickangle:35,ticklabeloverflow:"allow",automargin:!0},yaxis:{title:{text:"Zenith Distance (arcsec)",standoff:10},range:q,automargin:!0},height:420,margin:{l:50,r:20,t:20,b:50},shapes:U,showlegend:!0},config:{responsive:!0,displayModeBar:!1},style:{width:"100%",height:"100%"}})})]})]}),(0,t.jsx)(p,{title:"Simulation Code Example",defaultOpen:!1,className:"mt-8",children:(0,t.jsx)("div",{className:"rounded-md bg-gray-900 text-gray-100 p-4 text-sm overflow-auto",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap",children:(0,t.jsx)("code",{children:'# ----------------------------\n# Helpers\n# ----------------------------\nDEG = np.pi / 180.0\nHOUR = 15.0 * DEG \n\ndef rot_x(a):\n    ca, sa = np.cos(a), np.sin(a)\n    return np.array([\n        [1, 0, 0],\n        [0, ca, -sa],\n        [0, sa, ca]\n    ])\n\ndef rot_y(a):\n    ca, sa = np.cos(a), np.sin(a)\n    return np.array([\n        [ca, 0, sa],\n        [0, 1, 0],\n        [-sa, 0, ca]\n    ])\n\ndef rot_z(a):\n    ca, sa = np.cos(a), np.sin(a)\n    return np.array([\n        [ca, -sa, 0],\n        [sa,  ca, 0],\n        [0,   0,  1]\n    ])\n\ndef unit(v):\n    n = np.linalg.norm(v)\n    return v if n == 0 else v / n\n\ndef sph_to_cart(ra_rad, dec_rad, r=1.0):\n    """Equatorial coordinates:\n    x toward RA=0, y toward RA=6h, z toward N celestial pole."""\n    return r * np.array([\n        np.cos(dec_rad) * np.cos(ra_rad),\n        np.cos(dec_rad) * np.sin(ra_rad),\n        np.sin(dec_rad)\n    ])\n\ndef angle_between_line_and_plane(line_vec, plane_normal):\n    """\n    Compute the smallest angle (in radians) between a line (direction vector)\n    and a plane (normal vector).\n    The angle returned is between 0 and pi/2 (0 and 90 deg).\n\n    Args:\n        line_vec: direction vector of the line (length-3 array)\n        plane_normal: normal vector of the plane (length-3 array)\n\n    Returns:\n        angle (in radians)\n    """\n    # Ensure line_vec and plane_normal are unit vectors\n    v = unit(np.array(line_vec))\n    n = unit(np.array(plane_normal))\n    # Angle between line and plane: theta = arcsin(|v\xb7n|)\n    # (since v\xb7n = cos(phi), phi = angle between v and n; \n    # theta = 90 - phi = arcsin(|v\xb7n|))\n    return np.arcsin(np.abs(np.dot(v, n)))\n\ndef rotate_vector_around_axis(vec, axis, deg):\n    """\n    Rotate a 3D vector \'vec\' by \'deg\' degrees around the specified \'axis\' vector.\n\n    Args:\n        vec: Vector to rotate (length-3 array-like)\n        axis: Axis to rotate around (length-3 array-like)\n        deg: Angle to rotate, in degrees\n\n    Returns:\n        Rotated vector (numpy array, length 3)\n    """\n    # Ensure axis is a unit vector\n    k = unit(np.array(axis))\n    v = np.array(vec)\n    theta = np.deg2rad(deg)\n    # Rodrigues\' rotation formula\n    v_rot = (v * np.cos(theta) +\n             np.cross(k, v) * np.sin(theta) +\n             k * np.dot(k, v) * (1 - np.cos(theta)))\n    return v_rot\n\ndef angle_between_vectors(a, b):\n    """\n    Calculate the angle (in radians) between two vectors a and b.\n\n    Args:\n        a: First vector (array-like, length 3)\n        b: Second vector (array-like, length 3)\n\n    Returns:\n        Angle in radians between vectors a and b (float)\n    """\n    a = np.array(a)\n    b = np.array(b)\n    norm_a = np.linalg.norm(a)\n    norm_b = np.linalg.norm(b)\n    if norm_a == 0 or norm_b == 0:\n        raise ValueError("Cannot compute angle with zero-length vector")\n    cos_theta = np.dot(a, b) / (norm_a * norm_b)\n    # Clamp to avoid numerical errors outside [-1, 1]\n    cos_theta = np.clip(cos_theta, -1.0, 1.0)\n    return np.arccos(cos_theta)\n\ndef project_vector_onto_plane(vec, plane_normal):\n    """\n    Project a vector onto a plane defined by its normal vector.\n\n    Args:\n        vec: Vector to project (array-like, length 3)\n        plane_normal: Normal vector of the plane (array-like, length 3)\n\n    Returns:\n        The component of vec that lies in the plane (numpy array, length 3)\n    """\n    v = np.array(vec)\n    n = unit(np.array(plane_normal))\n    # Remove the component of v along n\n    return v - np.dot(v, n) * n\n\n\n# ----------------------------\n# Simulation parameters\n# ----------------------------\nTILT_DEG = 23.4             # Earth\'s axial tilt (obliquity)\nTILT = TILT_DEG * DEG\nAU = 1.0\n\n# Star as a tuple variable (dec, RA, distance)\nstar_dec_deg = 51.5\nstar_dec = star_dec_deg * DEG\nstar_ra_hours = 18\nstar_ra = star_ra_hours * HOUR\nstar_dist = 1e7\n\np_star = sph_to_cart(star_ra, star_dec, r=star_dist)\nstar_dec_plane = rot_z(star_ra) @ np.array([0, 1, 0])\n\n# Physical constants for aberration\nC = 3e8\nV = 3e4\nBETA = V / C\n\n# ----------------------------\n# Coordinate frames\n#   - Equatorial frame: Earth\'s equator is xy-plane, +z is North pole.\n#   - Ecliptic plane is tilted by obliquity about +x (line of nodes along x).\n#   - Sun at origin, Earth in a circular orbit in the ecliptic plane.\n# ----------------------------\n\n# Earth\'s ecliptic plane\ntheta = np.linspace(0, 2 * np.pi, 200)\nx_ecl = AU * np.cos(theta)\ny_ecl = AU * np.sin(theta)\nz_ecl = np.zeros_like(theta)\necliptic_points = rot_x(TILT) @ np.vstack([x_ecl, y_ecl, z_ecl])\necliptic_normal = rot_x(TILT) @ np.array([0, 0, 1])\necliptic_velocity = []\nfor point in ecliptic_points.T:\n    ecliptic_velocity.append(rotate_vector_around_axis(point, ecliptic_normal, 90))\necliptic_velocity = np.array(ecliptic_velocity).T  # shape (3, N)\n\ndays = np.arange(1, 366)\n\nrows = []\n\nfor day in days:\n    earth_ra_hour = ((day-80) / 365 * 24 + 12) % 24\n    earth_ra = earth_ra_hour * HOUR\n    x_earth = AU * np.cos(earth_ra)\n    y_earth = AU * np.sin(earth_ra)\n    z_earth = np.zeros_like(earth_ra)\n    p_earth = rot_x(TILT) @ np.array([x_earth, y_earth, z_earth])\n    los = p_earth - p_star\n    \n    dec_angle_parallax = angle_between_line_and_plane(los, np.array([0, 0, 1]))\n    zenith_dist_parallax = dec_angle_parallax - star_dec\n    \n    # note the star declination plane shifts as the earth orbits around the sun, but we approximate it as constant\n    # also we should find the angle between the velocity vector and the line of sight to the star\n    # but we approximate it as constant for aberration approximation\n    v_earth = rotate_vector_around_axis(p_earth, ecliptic_normal, 90) * V\n    v_earth_proj = project_vector_onto_plane(v_earth, star_dec_plane)\n    v_light = -p_star/np.linalg.norm(p_star) * C\n    v_light_aberration = v_light - v_earth_proj\n    \n    dec_angle_aberration = np.pi/2 - angle_between_vectors(v_light_aberration, np.array([0, 0, -1]))\n    dec_angle_check =  np.pi/2 - angle_between_vectors(v_light, np.array([0, 0, -1]))\n    zenith_dist_aberration = dec_angle_aberration - star_dec\n    \n    rows.append({\n        "day": day,\n        "dec_angle_parallax": dec_angle_parallax,\n        "zenith_dist_parallax": zenith_dist_parallax,\n        "dec_angle_aberration": dec_angle_aberration,\n        "zenith_dist_aberration": zenith_dist_aberration,\n        "zenith_dist": zenith_dist_parallax + zenith_dist_aberration,\n    })\n    '})})})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[408,743,441,684,358],()=>a(1412)),_N_E=e.O()}]);