(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{5674:(e,t,r)=>{Promise.resolve().then(r.bind(r,8466))},8466:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var l=r(5155),n=r(2115),i=r(6408),s=r(4186),a=r(6874),c=r.n(a);function o(e){let{items:t,className:r="",section:n,slug:s,departureUrl:a,arrivalUrl:o}=e,h=e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})};return(0,l.jsx)(i.P.div,{className:"fixed left-8 top-32 z-30 ".concat(r),initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 pr-8 py-4 w-80 max-w-80",children:[s&&a&&o&&(0,l.jsx)("div",{className:"mb-6 space-y-3",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(c(),{href:a,className:"flex-1 px-3 py-2 text-sm font-medium rounded-lg transition-colors text-center ".concat("departure"===n?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),children:"Departure"}),(0,l.jsx)(c(),{href:o,className:"flex-1 px-3 py-2 text-sm font-medium rounded-lg transition-colors text-center ".concat("arrival"===n?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),children:"Arrival"})]})}),(0,l.jsx)("h3",{className:"text-base font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Contents"}),(0,l.jsx)("nav",{className:"space-y-1",children:t.map((e,t)=>(0,l.jsx)("button",{onClick:()=>h(e.id),className:"block w-full text-left py-0.5 transition-colors hover:text-blue-600 dark:hover:text-blue-400 ".concat(2===e.level?"text-sm font-medium text-gray-900 dark:text-gray-100":"text-xs text-gray-600 dark:text-gray-400 pl-4"),title:e.title,children:(0,l.jsx)("span",{className:"block truncate pr-2",children:e.title})},"".concat(e.id,"-").concat(t)))})]})})}function h(){let[e,t]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let e=()=>{let e=window.scrollY;t(Math.min(100,Math.max(0,e/(document.documentElement.scrollHeight-window.innerHeight)*100)))};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]),(0,l.jsxs)("div",{className:"fixed top-20 left-8 z-40 w-48",children:[(0,l.jsx)("div",{className:"w-full h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,l.jsx)(i.P.div,{className:"h-full bg-blue-600 dark:bg-blue-400 rounded-full",style:{width:"".concat(e,"%")},initial:{width:0},animate:{width:"".concat(e,"%")},transition:{duration:.1}})}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[Math.round(e),"% read"]})]})}function d(e){let{children:t,content:r,departureContent:a,arrivalContent:c,frontmatter:d,section:p,slug:u,headings:m}=e,[g,y]=(0,n.useState)([]),x=r||t;(0,n.useEffect)(()=>{if(m&&m.length>0)y(m);else{let e=setTimeout(()=>{y(Array.from(document.querySelectorAll(".prose h2, .prose h3")).map((e,t)=>{let r=parseInt(e.tagName.substring(1)),l=e.textContent||"",n=e.id||"heading-".concat(t);return e.id||(e.id=n),{id:n,title:l,level:r}}))},100);return()=>clearTimeout(e)}},[x,m]);let f=u?"/posts/".concat(u,"/departure"):"#",b=u?"/posts/".concat(u,"/arrival"):"#";return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(h,{}),g.length>0&&(0,l.jsx)(o,{items:g,section:p,slug:u,departureUrl:f,arrivalUrl:b}),(0,l.jsx)("div",{className:"relative mx-auto py-16",style:{marginLeft:"calc(2rem + 20rem + 2rem)",marginRight:"calc(2rem + 20rem + 2rem)",maxWidth:"48rem"},children:(0,l.jsxs)("article",{className:"relative",style:{maxWidth:"48rem",margin:"0 auto"},children:[(0,l.jsx)(i.P.header,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12",style:{maxWidth:"48rem",margin:"0 auto"},children:(0,l.jsxs)("div",{className:"text-center space-y-6",children:[(0,l.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 dark:text-gray-100",children:d.title}),d.subtitle&&(0,l.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400 mx-auto",style:{maxWidth:"48rem"},children:d.subtitle}),(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500 dark:text-gray-500",children:[(0,l.jsx)("span",{children:d.date}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(s.A,{size:16}),(0,l.jsx)("span",{children:d.readTime})]})]})]})}),(0,l.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4,delay:.1},className:"relative",children:x},p||"content")]})})]})}function p(e){let t=[],r="",l=0;for(;l<e.length;){if("$"===e[l]&&"$"!==e[l+1]){r&&(t.push(...u(r)),r="");let n=l+1;for(;n<e.length&&"$"!==e[n];)n++;if(n<e.length){let r=e.slice(l+1,n);t.push({type:"span",props:{className:"math-inline",children:"\\(".concat(r,"\\)")},key:t.length}),l=n+1;continue}}if("`"===e[l]){r&&(t.push(...u(r)),r="");let n=l+1;for(;n<e.length&&"`"!==e[n];)n++;if(n<e.length){let r=e.slice(l+1,n);t.push({type:"code",props:{children:r},key:t.length}),l=n+1;continue}}r+=e[l],l++}return r&&t.push(...u(r)),t}function u(e){if(!e.includes("{color:"))return m(e);let t=[],r=0;return function e(t,r){if(0===r.length)return t;let l=e=>{let t=[e];return r.forEach(e=>{let r=[];t.forEach(t=>{if("string"!=typeof t)return void r.push(t);let l=t;for(;l.length>0;){let t=l.indexOf(e.placeholder);if(-1===t){l&&r.push(l);break}t>0&&r.push(l.slice(0,t));let n=u(e.content);r.push({type:"span",props:{style:{color:e.color},children:n}}),l=l.slice(t+e.placeholder.length)}}),t=r}),t},n=[];return t.forEach(t=>{if("string"==typeof t)n.push(...l(t));else if(t&&t.props&&null!=t.props.children){let l=t.props.children,i=e(Array.isArray(l)?l:[l],r);n.push({...t,props:{...t.props,children:i}})}else n.push(t)}),n}(m(e.replace(/\{color:([^}]+)\}([\s\S]*?)\{\/color\}/g,(e,l,n)=>{let i="__COLOR_BLOCK_".concat(r++,"__");return t.push({placeholder:i,color:String(l).trim(),content:String(n)}),i})),t)}function m(e){let t,r=[],l=/\[([^\]]+)\]\(([^)]+)\)/g,n=[],i=0;for(;null!==(t=l.exec(e));){t.index>i&&n.push({type:"text",content:e.slice(i,t.index)});let r=t[1],l=t[2];l.startsWith("localhost:")&&(l=l.replace("localhost:","")),n.push({type:"link",content:r,href:l}),i=t.index+t[0].length}return i<e.length&&n.push({type:"text",content:e.slice(i)}),0===n.length&&n.push({type:"text",content:e}),n.forEach((e,t)=>{if("link"===e.type)r.push({type:"a",props:{href:e.href,children:g(e.content),className:"text-blue-600 hover:text-blue-800 underline"},key:"".concat(t,"-link")});else{let t=g(e.content);r.push(...t)}}),r}function g(e){let t=[],r=e,l=0;for(;r.length>0;){let e=r.indexOf("*");if(-1===e){r&&t.push(r);break}if(e>0&&t.push(r.substring(0,e)),r.startsWith("***",e)){let n=r.indexOf("***",e+3);if(-1!==n){let i=r.substring(e+3,n);t.push({type:"strong",props:{children:{type:"em",props:{children:i},key:"".concat(l++,"-em")}},key:"".concat(l++,"-bold-italic")}),r=r.substring(n+3)}else t.push("***"),r=r.substring(e+3)}else if(r.startsWith("**",e)){let n=r.indexOf("**",e+2);if(-1!==n){let i=r.substring(e+2,n);t.push({type:"strong",props:{children:i},key:"".concat(l++,"-bold")}),r=r.substring(n+2)}else t.push("**"),r=r.substring(e+2)}else{let n=r.indexOf("*",e+1);if(-1===n||r.startsWith("**",n)||r.startsWith("***",n))t.push("*"),r=r.substring(e+1);else{let i=r.substring(e+1,n);t.push({type:"em",props:{children:i},key:"".concat(l++,"-italic")}),r=r.substring(n+1)}}}return t}var y=r(2603);function x(e){let{children:t,id:r}=e,n="20rem";return(0,l.jsx)("aside",{id:r,className:"absolute pl-8 border-l border-gray-200 dark:border-gray-700",style:{width:n,right:"calc(-".concat(n," - ").concat("2rem",")"),top:"0"},children:(0,l.jsx)("div",{className:"text-gray-600 dark:text-gray-400 prose prose-sm dark:prose-invert max-w-none",style:{fontSize:"0.875rem"},children:t})})}function f(e){let{postData:t,section:r,slug:i}=e,{content:s,departure:a,arrival:c,metadata:o}=t,h=r?s:a||c||s;if(!h)return null;let u=function e(t){let r=t.split("\n"),l=[],n=[],i=[],s=[],a=[],c=!1,o=[],h="",d=!1,u=[],m=()=>{if(s.length>0){let e=s.join(" ").trim();e&&l.push({type:"p",props:{children:p(e)},key:l.length}),s=[]}},g=()=>{if(a.length>0){let e=a.map((e,t)=>({type:"li",props:{children:p(e.replace(/^-\s*/,""))},key:t}));l.push({type:"ul",props:{children:e},key:l.length}),a=[]}};for(let t=0;t<r.length;t++){let y=r[t];if(":::note"===y.trim()||y.trim().startsWith(":::note ")){m(),g(),d=!0,u=[];let e=y.replace(/^:::note\s*/,"").trim();e&&u.push(e);continue}if(d)if(":::"===y.trim()){m(),g();let t=u.join("\n").trim();if(t){let r=e(t).content,n="sidenote-".concat(i.length);i.push({id:n,content:r,position:l.length}),l.push({type:"sidenote",props:{noteId:n,children:r},key:l.length})}d=!1,u=[];continue}else{u.push(y);continue}if(y.startsWith("```")){c?(l.push({type:"pre",props:{children:{type:"code",props:{className:h?"language-".concat(h):void 0,children:o.join("\n")}}},key:l.length}),c=!1,o=[],h=""):(m(),g(),c=!0,h=y.slice(3).trim(),o=[]);continue}if(c){o.push(y);continue}let x=y.match(/^(#{1,6})\s+(.+)$/);if(x){m(),g();let e=x[1].length,t=x[2],r=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");n.push({id:r,text:t,level:e});let i="h".concat(e);l.push({type:i,props:{id:r,children:p(t)},key:l.length});continue}if(y.startsWith("- ")){m(),a.push(y);continue}if(a.length>0&&""===y.trim()){g();continue}if(y.startsWith("> ")){m(),g();let e=y.slice(2);l.push({type:"blockquote",props:{className:"border-l-4 border-gray-300 pl-4 italic text-gray-600 dark:text-gray-400 my-4",children:p(e)},key:l.length});continue}let f=y.match(/^!\[([^\]]*)\]\(([^)]+)\)$/);if(f){m(),g();let e=f[1],n=f[2],i=null,s=!1,a=t+1;for(;a<r.length&&""===r[a].trim();)a++;if(a<r.length){let e=r[a],l=e.trim();if(l.startsWith("{caption}")){let l=[],n=e.replace("{caption}","").trim();n&&l.push(n);let c=a+1,o=!1;for(;c<r.length;){let e=r[c];if(e.trim().startsWith("{/caption}")){let t=e.replace("{/caption}","").trim();t&&l.push(t),o=!0;break}l.push(e),c++}o&&(i=l.join("\n"),s=!1,t=c)}else{let r=l.match(/^[*_](.+?)[*_]$/);r?(i=r[1],s=!0,t=a):!(l.length>0)||l.startsWith("#")||l.startsWith("- ")||l.startsWith("> ")||l.startsWith("$$")||l.match(/^!\[.*\]\(.*\)$/)||l.startsWith("```")||(i=e.trimEnd(),t=a)}}let c=[{type:"img",props:{src:n.startsWith("/")?n:"/".concat(n),alt:e,className:"max-w-full h-auto"},key:"img"}];if(i){let e=function(e){let t=e.split("\n"),r=[];return t.forEach((e,l)=>{let n=p(e);r.push(...n),l<t.length-1&&r.push({type:"br",props:{},key:"caption-br-".concat(l)})}),r}(i);c.push({type:"figcaption",props:{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 text-center"+(s?" italic":""),children:e},key:"caption"})}l.push({type:"figure",props:{className:(i?"mt-4 mb-8":"my-6")+" flex flex-col items-center",children:c},key:l.length});continue}if(y.startsWith("$$")){m(),g();let e=[y.slice(2)];for(t++;t<r.length&&!r[t].endsWith("$$");)e.push(r[t]),t++;t<r.length&&e.push(r[t].slice(0,-2));let n=e.join("\n").trim();n&&l.push({type:"div",props:{className:"math-block",children:"\\[".concat(n,"\\]")},key:l.length});continue}if(""===y.trim()){m();continue}s.push(y)}return m(),g(),{content:l,headings:n,sideNotes:i}}(h),m=e=>e.map((e,t)=>{if("string"==typeof e)return e;let{type:r,props:i}=e;if("sidenote"===r){let e=Array.isArray(i.children)?i.children:[i.children];return(0,l.jsx)("div",{className:"relative my-4",children:(0,l.jsx)(x,{id:i.noteId,children:m(e)})},t)}if((null==i?void 0:i.className)==="math-inline")return(0,l.jsx)(y.InlineMath,{math:i.children.slice(2,-2)},t);if((null==i?void 0:i.className)==="math-block")return(0,l.jsx)("div",{className:"my-4",children:(0,l.jsx)(y.BlockMath,{math:i.children.slice(2,-2)})},t);let s=null==i?void 0:i.children,a=Array.isArray(s)?m(s):"object"==typeof s&&null!==s?m([s]):s;return n.createElement(r,{key:t,...i},a)}),g=(0,l.jsx)("div",{className:"prose",style:{maxWidth:"48rem",margin:"0 auto"},children:m(u.content).filter(e=>null!==e)});(0,n.useEffect)(()=>{window.renderMathInElement&&window.renderMathInElement(document.body,{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1})},[g]);let f=u.headings.map(e=>({id:e.id,title:e.text,level:e.level}));return(0,l.jsx)(d,{frontmatter:o,content:g,section:r,slug:i,headings:f})}}}]);